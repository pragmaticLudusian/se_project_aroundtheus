!function(){"use strict";class e{constructor(e,t){let{items:s,renderer:r}=e;this._items=s,this._renderer=r,this._selector=t}renderItems(){this._container=document.querySelector(this._selector),this._items.forEach((e=>{this._renderer(e)}))}addItem(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"append";this._container[t](e)}}class t{constructor(e,t,s,r,i){let{name:n,link:a,_id:o,isLiked:l}=e;this._name=n,this._link=a,this._id=o,this._isLiked=l,this._cardSelector=t,this._handleImageClick=s,this._handleCardDelete=r,this._handleCardLike=i}_setEventListeners(){this._cardImage.addEventListener("click",(()=>{this._handleImageClick(this.getInfo())})),this._cardLike.addEventListener("click",(()=>{this._handleCardLike(this)})),this._cardDelete.addEventListener("click",(()=>{this._handleCardDelete(this)}))}likeCard(e){this._isLiked=e;const t=this._isLiked?"add":"remove";this._cardLike.classList[t]("card__like_active")}deleteCard(){this._cardDelete.closest(".card").remove(),this._cardElement=null}_getTemplate(){return document.querySelector(this._cardSelector).content.querySelector(".card").cloneNode(!0)}generateCard(){return this._cardElement=this._getTemplate(),this._cardImage=this._cardElement.querySelector(".card__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._cardElement.querySelector(".card__title").textContent=this._name,this._cardLike=this._cardElement.querySelector(".card__like"),this.likeCard(this._isLiked),this._cardDelete=this._cardElement.querySelector(".card__delete-button"),this._setEventListeners(),this._cardElement}getInfo(){return{name:this._name,link:this._link,id:this._id,isLiked:this._isLiked}}}class s{constructor(e,t){this._config=e,this._form=t}_setEventListeners(){this._inputList=Array.from(this._form.querySelectorAll(this._config.inputSelector)),this._inputList.forEach((e=>{e.addEventListener("input",(()=>{this._checkInputValidity(this,e)}))})),this._buttonElement=this._form.querySelector(this._config.submitButtonSelector)}_checkInputValidity(e,t){this._hasInvalidInput(this._inputList)?(this._showInputError(this,t),this.disableButton()):(this._hideInputError(this,t),this.enableButton())}_hasInvalidInput(e){return e.some((e=>!e.validity.valid))}_showInputError(e,t){const s=this._form.querySelector(`#${t.id}_error`);s.textContent=t.validationMessage,s.classList.add(this._config.activeErrorClass)}_hideInputError(e,t){const s=this._form.querySelector(`#${t.id}_error`);s.classList.remove(this._config.activeErrorClass),s.textContent=""}disableButton(){this._buttonElement.classList.replace(this._config.activeButtonClass,this._config.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0)}enableButton(){this._buttonElement.removeAttribute("disabled"),this._buttonElement.classList.replace(this._config.inactiveButtonClass,this._config.activeButtonClass)}resetFormValidation(){this._inputList.forEach((e=>{this._hideInputError(this,e)})),this.disableButton()}enableValidation(){this._setEventListeners()}}class r{constructor(e){this._popup=e}setEventListeners(){this._popup.addEventListener("click",(e=>{this._popup===e.target&&this.close()})),this._popup.querySelector(".modal__close-button").addEventListener("click",(()=>this.close()))}open(){this._escCallback=this._handleEscClose.bind(this),document.addEventListener("keydown",this._escCallback),this._popup.classList.add("modal_opened")}close(){this._popup.classList.remove("modal_opened"),document.removeEventListener("keydown",this._escCallback)}_handleEscClose(e){"Escape"===e.key&&this.close()}}class i extends r{constructor(e,t,s,r){super(e),this._handleSubmit=t,this._inputSelector=s,this._submitSelector=r,this._submitText=this._submitSelector.textContent}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._handleSubmit(e,this._getInputValues())})),this._inputFields=Array.from(this._popup.querySelectorAll(this._inputSelector))}_getInputValues(){const e={};return this._inputFields.forEach((t=>{e[t.name]=t.value})),e}setInputValues(e){this._inputFields.forEach((t=>{t.value=e[t.name]}))}renderLoading(e){let t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"Saving...";this._submitSelector.textContent=e?t:this._submitText}}const n={inputSelector:".form__input",submitButtonSelector:".form__save-button",inactiveButtonClass:"form__save-button_inactive",activeButtonClass:"form__save-button_active",activeErrorClass:"form__error_active"},a=document.querySelector(".profile"),o=a.querySelector(".profile__edit-button"),l=a.querySelector(".profile__name"),d=a.querySelector(".profile__description"),c=a.querySelector(".profile__avatar"),h=a.querySelector(".profile__avatar-edit"),_=document.querySelector("#modal_profile_info"),u=document.forms.profile_info_form,m=(u.name,u.description,u.profile_info_form_save),p=document.querySelector("#modal_profile_avatar"),v=document.forms.profile_avatar_form,f=(v.avatar,v.profile_avatar_form_save),E=a.querySelector(".profile__add-button"),b=document.querySelector("#modal_card-add"),L=document.forms["card-add_form"],g=L["card-add_form_save"],k=document.querySelector("#modal_card-view"),C=k.querySelector(".modal__image"),S=k.querySelector(".modal__caption"),y=document.querySelector("#modal_card-delete"),I=new class{constructor(e){this._baseUrl=e.baseUrl,this._headers=e.headers}_request(e,t){return fetch(e,t).then(this._checkResponse)}_checkResponse(e){return e.ok?e.json():Promise.reject(`error ${e.status}`)}getUserProfileData(){return this._request(`${this._baseUrl}/users/me`,{headers:this._headers})}getInitialCards(){return this._request(`${this._baseUrl}/cards`,{headers:this._headers})}getUserAndCards(e){return Promise.all(e)}setUserProfileData(e,t){return this._request(`${this._baseUrl}/users/me`,{method:"PATCH",headers:this._headers,body:JSON.stringify({name:e,about:t})})}addNewCard(e,t){return this._request(`${this._baseUrl}/cards`,{method:"POST",headers:this._headers,body:JSON.stringify({name:e,link:t})})}deleteCard(e){return this._request(`${this._baseUrl}/cards/${e}`,{method:"DELETE",headers:this._headers})}likeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"PUT",headers:this._headers})}unlikeCard(e){return this._request(`${this._baseUrl}/cards/${e}/likes`,{method:"DELETE",headers:this._headers})}setUserProfileAvatar(e){return this._request(`${this._baseUrl}/users/me/avatar`,{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:e})})}}({baseUrl:"https://around-api.en.tripleten-services.com/v1",headers:{"content-type":"application/json",authorization:"c48564f3-ecfb-4a65-b35d-031aabc842ce"}});let q,U;I.getUserAndCards([I.getUserProfileData(),I.getInitialCards()]).then((t=>{let[{_id:s,name:r,about:i,avatar:n},a]=t;U=s,D.setUserInfo(r,i),D.setAvatar(n),q=new e({items:a,renderer:e=>{const t=A(e);q.addItem(t)}},".gallery__cards"),q.renderItems()})).catch((e=>{console.error(e)}));const A=e=>new t(e,"#card-template",V,N,j).generateCard(),w={};function x(e,t){let s=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"Saving...";t.renderLoading(!0,s),e().then((()=>{t.close()})).catch(console.error).finally((()=>{t.renderLoading(!1)}))}Array.from(document.forms).forEach((e=>{const t=new s(n,e);w[e.id]=t,t.enableValidation()}));const D=new class{constructor(e){let{name:t,description:s,avatar:r}=e;this._nameElement=t,this._jobElement=s,this._avatarElement=r}getUserInfo(){return{name:this._nameElement.textContent,description:this._jobElement.textContent}}setUserInfo(e,t){this._nameElement.textContent=e,this._jobElement.textContent=t}getAvatar(){return{avatar:this._avatarElement.src}}setAvatar(e){this._avatarElement.src=e}}({name:l,description:d,avatar:c});o.addEventListener("click",(()=>{B.setInputValues(D.getUserInfo()),w.profile_info_form.resetFormValidation(),B.open()}));const B=new i(_,((e,t)=>{let{name:s,description:r}=t;e.preventDefault(),x((()=>I.setUserProfileData(s,r).then((()=>{D.setUserInfo(s,r)}))),B)}),n.inputSelector,m);B.setEventListeners(),h.addEventListener("click",(()=>{$.setInputValues(D.getAvatar()),$.open()}));const $=new i(p,((e,t)=>{let{avatar:s}=t;e.preventDefault(),x((()=>I.setUserProfileAvatar(s).then((()=>{D.setAvatar(s),$.close()}))),$)}),n.inputSelector,f);$.setEventListeners(),E.addEventListener("click",(()=>{P.open()}));const P=new i(b,((e,t)=>{let{title:s,link:r}=t;e.preventDefault(),x((()=>I.addNewCard(s,r).then((e=>{const t=A(e);q.addItem(t,"prepend"),P.close(),L.reset(),w["card-add_form"].disableButton()}))),P,"Creating...")}),n.inputSelector,g);function V(e){T.open(e)}P.setEventListeners();const T=new class extends r{constructor(e,t){super(e),this._modalElements=t}open(e){let{name:t,link:s}=e;this._modalElements.image.src=s,this._modalElements.image.alt=t,this._modalElements.caption.textContent=t,super.open()}}(k,{image:C,caption:S});function j(e){const t=e.getInfo().isLiked?"unlikeCard":"likeCard";I[t](e.getInfo().id).then((t=>{e.likeCard(t.isLiked)})).catch((e=>{console.error(e)}))}function N(e){F.open(e)}T.setEventListeners();const F=new class extends r{constructor(e,t){super(e),this._handleSubmit=t}setEventListeners(){super.setEventListeners(),this._popup.addEventListener("submit",(e=>{this._handleSubmit(e,this._initiator)}))}open(e){this._initiator=e,super.open()}}(y,((e,t)=>{e.preventDefault(),I.deleteCard(t.getInfo().id).then((()=>{t.deleteCard()})).catch((e=>{console.error(e)})).finally((()=>{F.close()}))}));F.setEventListeners()}();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QixJSXpOVCxjQUErQnJJLEVBQzVDdkYsV0FBQUEsQ0FBWXdGLEVBQU9hLEdBQ2pCRyxNQUFNaEIsR0FDTm5GLEtBQUtvRyxjQUFnQkosQ0FDdkIsQ0FFQVgsaUJBQUFBLEdBQ0VjLE1BQU1kLG9CQUNOckYsS0FBS29GLE9BQU9sRCxpQkFBaUIsVUFBV29ELElBQ3RDdEYsS0FBS29HLGNBQWNkLEVBQU90RixLQUFLd04sV0FBVyxHQUU5QyxDQUVBL0gsSUFBQUEsQ0FBS2dJLEdBQ0h6TixLQUFLd04sV0FBYUMsRUFDbEJ0SCxNQUFNVixNQUNSLEdKME1Ba0QsR0FDQSxDQUFDckQsRUFBTzBILEtBRU4xSCxFQUFNbUgsaUJBRU43RCxFQUNHcEcsV0FBV3dLLEVBQUs3SyxVQUFVZ0IsSUFDMUJrRyxNQUFLLEtBQ0oyRCxFQUFLeEssWUFBWSxJQUVsQjhJLE9BQU9DLElBQ05DLFFBQVFDLE1BQU1GLEVBQUksSUFFbkJRLFNBQVEsS0FDUHdCLEVBQWdCL0gsT0FBTyxHQUN2QixJQUdSK0gsRUFBZ0JsSSxtQiIsInNvdXJjZXMiOlsid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9TZWN0aW9uLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL3BhZ2VzL2luZGV4LmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9BcGkuanMiLCJ3ZWJwYWNrOi8vc2VfcHJvamVjdF9hcm91bmR0aGV1cy8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL3NlX3Byb2plY3RfYXJvdW5kdGhldXMvLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9zZV9wcm9qZWN0X2Fyb3VuZHRoZXVzLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoQ29uZmlybS5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBTZWN0aW9uIHtcbiAgLy8gbm9uLXRhbmdpYmxlIGNsYXNzIHRvIGFkZCBlbGVtZW50cyB0byB0aGUgd2VicGFnZVxuICBjb25zdHJ1Y3Rvcih7IGl0ZW1zLCByZW5kZXJlciB9LCBzZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zID0gaXRlbXM7IC8vIGFycmF5IG9mIG9iamVjdHNcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyOyAvLyBjdXN0b20tdGFpbG9yZWQgZnVuYyBmb3IgY2xhc3Nlc1xuICAgIHRoaXMuX3NlbGVjdG9yID0gc2VsZWN0b3I7IC8vIGNsYXNzL2lkIHNlbGVjdG9yICh0eXBlb2Ygc3RyaW5nKVxuICB9XG5cbiAgcmVuZGVySXRlbXMoKSB7XG4gICAgdGhpcy5fY29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3Rvcih0aGlzLl9zZWxlY3Rvcik7XG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xuICAgICAgdGhpcy5fcmVuZGVyZXIoaXRlbSk7IC8vIHBhc3MgaXRlbSBvdXQgb2YgYXJyYXkgYXMgYXJnIHRvIHRoZSBmdW5jdGlvbiBib2R5IGluc2lkZSBpbmRleC5qc1xuICAgIH0pO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50LCBtZXRob2QgPSBcImFwcGVuZFwiKSB7XG4gICAgdGhpcy5fY29udGFpbmVyW21ldGhvZF0oZWxlbWVudCk7IC8vIGFkZCBlbGVtIHRvIHNlbGVjdGVkIGNvbnRhaW5lclxuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoXG4gICAgeyBuYW1lLCBsaW5rLCBfaWQsIGlzTGlrZWQgfSwgLy8gcmVmbGVjdCBmcm9tIEpTT05cbiAgICBjYXJkU2VsZWN0b3IsXG4gICAgaGFuZGxlSW1hZ2VDbGljayxcbiAgICBoYW5kbGVDYXJkRGVsZXRlLFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICkge1xuICAgIHRoaXMuX25hbWUgPSBuYW1lO1xuICAgIHRoaXMuX2xpbmsgPSBsaW5rO1xuICAgIHRoaXMuX2lkID0gX2lkO1xuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIHRoaXMuX2NhcmRTZWxlY3RvciA9IGNhcmRTZWxlY3RvcjsgLy8gdGVtcGxhdGVcbiAgICB0aGlzLl9oYW5kbGVJbWFnZUNsaWNrID0gaGFuZGxlSW1hZ2VDbGljazsgLy8gaGFuZGxlQ2FyZFBvcHVwSW1hZ2UoKTsgYWxsIHRoZXNlIGFyZSBjdXJyZW50bHkgQGluZGV4LmpzXG4gICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSA9IGhhbmRsZUNhcmREZWxldGU7IC8vIGhhbmRsZUNhcmRQb3B1cERlbGV0ZSgpOyBjb25maXJtYXRpb24gcG9wdXAgdG8gZGVsZXRlIGEgY2FyZFxuICAgIHRoaXMuX2hhbmRsZUNhcmRMaWtlID0gaGFuZGxlQ2FyZExpa2U7IC8vIGhhbmRsZUNhcmRMaWtlKCk7IHVzZWQgdG8gaGFuZGxlIHRoZSBET00gc2lkZSBvZiB0aGUgbGlrZSBib29sZWFuIHN0YXR1cyBmcm9tIHRoZSBzZXJ2ZXJcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICAgIHRoaXMuX2hhbmRsZUltYWdlQ2xpY2sodGhpcy5nZXRJbmZvKCkpOyAvLyB1c2UganVzdCBuYW1lIGFuZCBsaW5rIHRvIGxvYWQgdGhlIHBvcHVwIGltYWdlXG4gICAgfSk7XG5cbiAgICB0aGlzLl9jYXJkTGlrZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZExpa2UodGhpcyk7IC8vIGlmIGNhbGxiYWNrIHdhcyBqdXN0IGEgcmVmIHRvIHRoZSBtZXRob2QsIGl0IHdvdWxkIHBhc3MgYXMgdGhlIGNhcmQgaW1hZ2UgZWxlbWVudCwgc28gaW5zdGVhZCB0aGlzIHdvdWxkIHBhc3MgYWxvbmcgdGhlIGNsYXNzIG9iamVjdCB3aXRoIGFsbCB0aGUgY2xhc3Mtc3BlY2lmaWMgdmFyc1xuICAgIH0pO1xuXG4gICAgdGhpcy5fY2FyZERlbGV0ZS5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlQ2FyZERlbGV0ZSh0aGlzKTsgLy8gc2FtZSBoZXJlLCBidXQgaGVyZSB0aGUgZWxlbWVudCdzIGdvaW5nIHRvIGJlIG5lZWRlZCB0byBkZWxldGUgdGhlIGNhcmQgZnJvbSBET00ganVzdCBhZnRlciByZXF1ZXN0aW5nIHRoZSBhcGkgdG8gZGVsZXRlIGZyb20gdGhlIHNlcnZlclxuICAgIH0pO1xuICB9XG5cbiAgbGlrZUNhcmQoaXNMaWtlZCkge1xuICAgIHRoaXMuX2lzTGlrZWQgPSBpc0xpa2VkO1xuICAgIGNvbnN0IG1ldGhvZCA9IHRoaXMuX2lzTGlrZWQgPyBcImFkZFwiIDogXCJyZW1vdmVcIjtcbiAgICB0aGlzLl9jYXJkTGlrZS5jbGFzc0xpc3RbbWV0aG9kXShcImNhcmRfX2xpa2VfYWN0aXZlXCIpO1xuICAgIC8vIGNvbnNvbGUubG9nKHRoaXMuZ2V0SW5mbygpLCB0aGlzLl9pc0xpa2VkKTtcbiAgfVxuXG4gIGRlbGV0ZUNhcmQoKSB7XG4gICAgLy8gd29ya3Mgd2l0aCB0aGUgc2FtZSBwcmluY2lwbGUgb2YgZ2VuZXJhdGVDYXJkKCksIGJ1dCBhbHNvIHBvc3NpYmxlIGZyb20gaW5kZXguanNcbiAgICB0aGlzLl9jYXJkRGVsZXRlLmNsb3Nlc3QoXCIuY2FyZFwiKS5yZW1vdmUoKTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IG51bGw7IC8vIGZyZWUgdXAgcmVzb3VyY2VzXG4gIH1cblxuICBfZ2V0VGVtcGxhdGUoKSB7XG4gICAgY29uc3QgY2FyZFRlbXBsYXRlID0gZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX2NhcmRTZWxlY3RvcilcbiAgICAgIC5jb250ZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZFwiKVxuICAgICAgLmNsb25lTm9kZSh0cnVlKTsgLy8gcHJlLWxvb3AgZm9yIGNhcmRHZW5lcmF0ZSgpXG4gICAgcmV0dXJuIGNhcmRUZW1wbGF0ZTtcbiAgfVxuXG4gIGdlbmVyYXRlQ2FyZCgpIHtcbiAgICB0aGlzLl9jYXJkRWxlbWVudCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7IC8vIHRyZWF0IGxpa2UgY2xhc3Mtc3BlY2lmaWMgdmFyIChub24tc3RhdGljLCBraW5kYSBsaWtlIGxldClcbiAgICB0aGlzLl9jYXJkSW1hZ2UgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2ltYWdlXCIpOyAvLyB0aGlzLl92YXIgd291bGQgYmUgdXNlZCBmb3IgaGFuZGxpbmcgaW1hZ2UgY2xpY2ssIHNvIGl0J3Mgbm90IGEgY29uc3QgaGVyZVxuICAgIHRoaXMuX2NhcmRJbWFnZS5zcmMgPSB0aGlzLl9saW5rOyAvLyBmb3JtYWxseSByZWZlcnJlZCB0byBhcyBcImNsYXNzIGZpZWxkc1wiIG9yIHByb3BlcnRpZXNcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX3RpdGxlXCIpLnRleHRDb250ZW50ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9jYXJkTGlrZSA9IHRoaXMuX2NhcmRFbGVtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuY2FyZF9fbGlrZVwiKTtcbiAgICB0aGlzLmxpa2VDYXJkKHRoaXMuX2lzTGlrZWQpO1xuICAgIHRoaXMuX2NhcmREZWxldGUgPSB0aGlzLl9jYXJkRWxlbWVudC5xdWVyeVNlbGVjdG9yKFwiLmNhcmRfX2RlbGV0ZS1idXR0b25cIik7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9jYXJkRWxlbWVudDtcbiAgfVxuXG4gIGdldEluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWUsIC8vIGV2ZW4gaWYgdGhlIGZvcm0gdG8gYWRkIGEgY2FyZCBpcyBjYWxsZWQgXCJ0aXRsZVwiLCBpdCBjYW4gYmUgYWxpYXNlZCBieSByZWYgb3IgYnkgZGVjb25zdHJ1Y3RvcnNcbiAgICAgIGxpbms6IHRoaXMuX2xpbmssXG4gICAgICBpZDogdGhpcy5faWQsXG4gICAgICBpc0xpa2VkOiB0aGlzLl9pc0xpa2VkLFxuICAgIH07XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEZvcm1WYWxpZGF0b3Ige1xuICBjb25zdHJ1Y3Rvcihjb25maWcsIGZvcm0pIHtcbiAgICB0aGlzLl9jb25maWcgPSBjb25maWc7IC8vIHNldHRpbmdzIG9ialxuICAgIHRoaXMuX2Zvcm0gPSBmb3JtOyAvLyBmb3JtIGVsZW0sIG5vdCBpZFxuICB9XG5cbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHRoaXMuX2lucHV0TGlzdCA9IEFycmF5LmZyb20oXG4gICAgICB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwodGhpcy5fY29uZmlnW1wiaW5wdXRTZWxlY3RvclwiXSlcbiAgICApO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIC8vIHRoaXMuX2lucHV0RWxlbWVudCA9IGlucHV0RWxlbWVudDsgLy8gdGhpcyBnZXRzIG92ZXJ3cml0dGVuIGFuZCBjYXVzZXMgdGhlIGxhc3QgaW5wdXQgb24gdGhlIGxpc3QgdG8gYmUgc2VsZWN0ZWQuIGl0IG1heSBub3QgYmUgc3RhdGljLCBidXQgaXQncyBzaGFyZWQgYW1vbmcgdGhlIHZlcnkgc2FtZSBpbnN0YW5jZSBvZiB0aGUgY2xhc3NcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKFwiaW5wdXRcIiwgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkodGhpcywgaW5wdXRFbGVtZW50KTsgLy8gYXMgc3VjaCwgYW5vdGhlciBhcmd1bWVudCBuZWVkcyB0byBwYXNzIHRocm91Z2hcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IoXG4gICAgICB0aGlzLl9jb25maWdbXCJzdWJtaXRCdXR0b25TZWxlY3RvclwiXVxuICAgICk7IC8vIGZvciB1c2UgaW4gYm90aCB0aGUgY2xhc3MgY29uc3RydWN0aW9uIGFuZCByZXNldFZhbGlkYXRpb24gbWV0aG9kLCBoZXJlIGJlaW5nIHRoZSBleGNlcHRpb24gcmF0aGVyIHRoYW4gdGhlIHJ1bGVcbiAgfVxuXG4gIF9jaGVja0lucHV0VmFsaWRpdHkob2JqLCBpbnB1dEVsZW1lbnQpIHtcbiAgICAvLyBvYmosIGJlaW5nIHRoZSAxc3QgcGFyYW1ldGVyIGlzIGVxdWl2YWxlbnQgdG8gdGhlIGtleXdvcmQgdGhpc1xuICAgIGlmICh0aGlzLl9oYXNJbnZhbGlkSW5wdXQodGhpcy5faW5wdXRMaXN0KSkge1xuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IodGhpcywgaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuZGlzYWJsZUJ1dHRvbigpOyAvLyBcImVuZC1wb2ludFwiIG1ldGhvZHMgbmVlZCBubyBhcmdzIGluY2wuIHRoaXNcbiAgICB9IGVsc2Uge1xuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IodGhpcywgaW5wdXRFbGVtZW50KTtcbiAgICAgIHRoaXMuZW5hYmxlQnV0dG9uKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhc0ludmFsaWRJbnB1dChpbnB1dExpc3QpIHtcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xuICAgICAgcmV0dXJuICFpbnB1dEVsZW1lbnQudmFsaWRpdHkudmFsaWQ7XG4gICAgfSk7XG4gIH1cblxuICBfc2hvd0lucHV0RXJyb3Iob2JqLCBpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dEVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9X2Vycm9yYCk7XG4gICAgaW5wdXRFcnJvci50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICBpbnB1dEVycm9yLmNsYXNzTGlzdC5hZGQodGhpcy5fY29uZmlnW1wiYWN0aXZlRXJyb3JDbGFzc1wiXSk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3Iob2JqLCBpbnB1dEVsZW1lbnQpIHtcbiAgICBjb25zdCBpbnB1dEVycm9yID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAjJHtpbnB1dEVsZW1lbnQuaWR9X2Vycm9yYCk7XG4gICAgaW5wdXRFcnJvci5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2NvbmZpZ1tcImFjdGl2ZUVycm9yQ2xhc3NcIl0pO1xuICAgIGlucHV0RXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9XG5cbiAgZGlzYWJsZUJ1dHRvbigpIHtcbiAgICAvLyB1bmxlc3MgdXNpbmcgdGhlIHByaXZhdGUgcHJvcGVydGllcyBmcm9tIHRoZSBjb25zdHJ1Y3RvciwgdXNpbmcgaW50ZXJtZWRpYXRlIHByaXYuIHByb3BzLiB3b3VsZCBiZSBjb25zaWRlcmVkIHVuZGVmIGlmIGNhbGxlZCBmcm9tIG91dHNpZGUgdXNpbmcgYSBwdWJsaWMgbWV0aG9kXG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QucmVwbGFjZShcbiAgICAgIHRoaXMuX2NvbmZpZ1tcImFjdGl2ZUJ1dHRvbkNsYXNzXCJdLFxuICAgICAgdGhpcy5fY29uZmlnW1wiaW5hY3RpdmVCdXR0b25DbGFzc1wiXVxuICAgICk7XG4gICAgdGhpcy5fYnV0dG9uRWxlbWVudC5zZXRBdHRyaWJ1dGUoXCJkaXNhYmxlZFwiLCB0cnVlKTtcbiAgfVxuXG4gIGVuYWJsZUJ1dHRvbigpIHtcbiAgICB0aGlzLl9idXR0b25FbGVtZW50LnJlbW92ZUF0dHJpYnV0ZShcImRpc2FibGVkXCIpO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlcGxhY2UoXG4gICAgICB0aGlzLl9jb25maWdbXCJpbmFjdGl2ZUJ1dHRvbkNsYXNzXCJdLFxuICAgICAgdGhpcy5fY29uZmlnW1wiYWN0aXZlQnV0dG9uQ2xhc3NcIl1cbiAgICApO1xuICB9XG5cbiAgcmVzZXRGb3JtVmFsaWRhdGlvbigpIHtcbiAgICAvLyByZW1vdmUgZXJyb3JzIGFuZCBkaXNhYmxlIHRoZW0gcmF0aGVyIHRoYW4gYWRkaW5nIHRoZW0gYW5ld1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcbiAgICAgIHRoaXMuX2hpZGVJbnB1dEVycm9yKHRoaXMsIGlucHV0RWxlbWVudCk7XG4gICAgfSk7XG4gICAgdGhpcy5kaXNhYmxlQnV0dG9uKCk7XG4gIH1cblxuICBlbmFibGVWYWxpZGF0aW9uKCkge1xuICAgIHRoaXMuX3NldEV2ZW50TGlzdGVuZXJzKCk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXApIHtcbiAgICB0aGlzLl9wb3B1cCA9IHBvcHVwOyAvLyB0aGUgcG9wdXAgc2VsZWN0b3IgKGFzIGFuIGVsZW1lbnQpXG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgICBpZiAodGhpcy5fcG9wdXAgPT09IGV2ZW50LnRhcmdldCkgdGhpcy5jbG9zZSgpO1xuICAgIH0pO1xuICAgIGNvbnN0IGNsb3NlQnV0dG9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcihcIi5tb2RhbF9fY2xvc2UtYnV0dG9uXCIpO1xuICAgIGNsb3NlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB0aGlzLmNsb3NlKCkpO1xuICAgIC8vIGZvciBjYWxsYmFjayBmdW5jIHRvIGNhbGwgZm9yd2FyZCBhIGZ1bmMsIGl0IHdvdWxkIHN0aWxsIG5lZWQgdG8gaGF2ZSBhbiBhbm9uLmZ1bmMgYm9keSwgc2luY2UgXCJ0aGlzXCIgYmVpbmcgdGhlIGNsYXNzIG9iamVjdCBmdW5jdGlvbnMgYmV0dGVyIGluc2lkZSBhbm9uLmZ1bmMgYXMgb3Bwb3NlZCB0byBhIG5hbWVkIGNhbGxiYWNrXG4gIH1cblxuICBvcGVuKCkge1xuICAgIHRoaXMuX2VzY0NhbGxiYWNrID0gdGhpcy5faGFuZGxlRXNjQ2xvc2UuYmluZCh0aGlzKTsgLy8gYXBwYXJlbnRseSB3aXRoIG5hbWVkIGNhbGxiYWNrcyAtIHdoaWNoIGFyZSByZXF1aXJlZCB0byBiZSByZW1vdmVkIC0gXCJ0aGlzXCIgaW4gX2hFQyB3aWxsIHJlZmVyIHRvIHRoZSB3aG9sZSBkb2N1bWVudCBhbmQgbm90IHRoZSBwb3B1cCBpbnN0YW5jZSwgc28gYmluZGluZyBpdCBlbnN1cmVzIHRoYXQgdGhlIHBvcHVwIGl0c2VsZiBjYW4gYmUgcGFzc2VkIHRocm91Z2ggd2l0aG91dCBhZGRpdGlvbmFsIGFyZ3MgYW5kIHJldGFpbiBldmVudC5rZXkuLi5cbiAgICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKFwia2V5ZG93blwiLCB0aGlzLl9lc2NDYWxsYmFjayk7IC8vIC4uLmhvd2V2ZXIsIHVzaW5nIGJpbmQoKSBjYXVzZXMgYW4gZW50aXJlbHkgZGlmZmVyZW50IGZ1bmN0aW9uIHdpdGggYSBkaWZmZXJlbnQgcmVmIHRvIGJlIGNyZWF0ZWQsIHNvIHRoZSBvcmlnaW5hbCByZWYgd291bGQgYmUgbG9zdCwgaWYgbm90IHRvIGhhdmUgaXQgc2F2ZWQgaW50byBhIGNsYXNzIGZpZWxkIHRvIHJlbW92ZSB0aGUgZXZlbnQgbGlzdGVuZXIuXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LmFkZChcIm1vZGFsX29wZW5lZFwiKTtcbiAgfVxuXG4gIGNsb3NlKCkge1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoXCJtb2RhbF9vcGVuZWRcIik7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcihcImtleWRvd25cIiwgdGhpcy5fZXNjQ2FsbGJhY2spOyAvLyBRb0wgYW5kIGl0IGNhbiBiZSByZS1lbmFibGVkIHVwb24gb3BlbmluZyB0aGUgcG9wdXBcbiAgfVxuXG4gIF9oYW5kbGVFc2NDbG9zZShldmVudCkge1xuICAgIGlmIChldmVudC5rZXkgPT09IFwiRXNjYXBlXCIpIHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhGb3JtIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cCwgaGFuZGxlU3VibWl0LCBpbnB1dFNlbGVjdG9yLCBzdWJtaXRTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwKTsgLy8gcG9wdXAgc2VsZWN0ZWQgZWxlbWVudFxuICAgIHRoaXMuX2hhbmRsZVN1Ym1pdCA9IGhhbmRsZVN1Ym1pdDsgLy8gY2FsbGJhY2sgZnVuYyBmb3Igc3VibWl0dGluZyBmb3JtXG4gICAgdGhpcy5faW5wdXRTZWxlY3RvciA9IGlucHV0U2VsZWN0b3I7XG4gICAgdGhpcy5fc3VibWl0U2VsZWN0b3IgPSBzdWJtaXRTZWxlY3RvcjsgLy8gdXNlZCBmb3IgYXBpIHJlbmRlclxuICAgIHRoaXMuX3N1Ym1pdFRleHQgPSB0aGlzLl9zdWJtaXRTZWxlY3Rvci50ZXh0Q29udGVudDsgLy8gaW5pdGlhbCBwcmUtbG9hZGluZyBzdWJtaXQgdGV4dFxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KGV2ZW50LCB0aGlzLl9nZXRJbnB1dFZhbHVlcygpKTsgLy8gcGFzcyBhbmQgZXhlY3V0ZSBmdW5jXG4gICAgfSk7XG4gICAgdGhpcy5faW5wdXRGaWVsZHMgPSBBcnJheS5mcm9tKFxuICAgICAgdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCh0aGlzLl9pbnB1dFNlbGVjdG9yKVxuICAgICk7XG4gIH1cblxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XG4gICAgY29uc3QgaW5wdXRWYWx1ZXMgPSB7fTtcbiAgICB0aGlzLl9pbnB1dEZpZWxkcy5mb3JFYWNoKChpbnB1dCkgPT4ge1xuICAgICAgaW5wdXRWYWx1ZXNbaW5wdXQubmFtZV0gPSBpbnB1dC52YWx1ZTtcbiAgICB9KTtcbiAgICByZXR1cm4gaW5wdXRWYWx1ZXM7XG4gIH1cblxuICBzZXRJbnB1dFZhbHVlcyhkYXRhKSB7XG4gICAgdGhpcy5faW5wdXRGaWVsZHMuZm9yRWFjaCgoaW5wdXQpID0+IHtcbiAgICAgIGlucHV0LnZhbHVlID0gZGF0YVtpbnB1dC5uYW1lXTtcbiAgICB9KTtcbiAgfVxuXG4gIHJlbmRlckxvYWRpbmcoaXNMb2FkaW5nLCBsb2FkaW5nVGV4dCA9IFwiU2F2aW5nLi4uXCIpIHtcbiAgICB0aGlzLl9zdWJtaXRTZWxlY3Rvci50ZXh0Q29udGVudCA9IGlzTG9hZGluZ1xuICAgICAgPyBsb2FkaW5nVGV4dFxuICAgICAgOiB0aGlzLl9zdWJtaXRUZXh0O1xuICB9XG59XG4iLCJleHBvcnQgY29uc3QgY29uZmlndXJhdGlvbiA9IHtcbiAgLy8gZm9ybVNlbGVjdG9yOiBcIi5mb3JtXCIsIC8vIGhhbmRsZWQgdGhyb3VnaCBkb2N1bWVudC5mb3JtcyBwc2V1ZG8tYXJyYXlcbiAgaW5wdXRTZWxlY3RvcjogXCIuZm9ybV9faW5wdXRcIixcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6IFwiLmZvcm1fX3NhdmUtYnV0dG9uXCIsXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc2F2ZS1idXR0b25faW5hY3RpdmVcIixcbiAgYWN0aXZlQnV0dG9uQ2xhc3M6IFwiZm9ybV9fc2F2ZS1idXR0b25fYWN0aXZlXCIsXG4gIC8vIGlucHV0RXJyb3JDbGFzczogXCJwb3B1cF9faW5wdXRfdHlwZV9lcnJvclwiLCAvLyBoYW5kbGVkIHZpYSBDU1MgcHNldWRvLWNsYXNzXG4gIC8vIGVycm9yU2VsZWN0b3I6IGAjJHtpbnB1dEVsZW1lbnQuaWR9X2Vycm9yYCwgLy8gZHVlIHRvIHVzZSBvZiBlc2MuIGxpdC4gYW5kIGlkIGNsYXNzIHRlbXBsYXRlcywgdGhpcyBpcyB1bnVzZWRcbiAgYWN0aXZlRXJyb3JDbGFzczogXCJmb3JtX19lcnJvcl9hY3RpdmVcIixcbn07XG5cbi8vIGluaXQgcHJvZmlsZSBlZGl0aW5nICYgcmVsYXRlZCBtb2RhbCB3aW5kb3dcbmNvbnN0IHByb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2ZpbGVcIik7XG5leHBvcnQgY29uc3QgYnV0dG9uRWRpdFByb2ZpbGUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fZWRpdC1idXR0b25cIik7XG5leHBvcnQgY29uc3QgcHJvZmlsZU5hbWUgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fbmFtZVwiKTtcbmV4cG9ydCBjb25zdCBwcm9maWxlRGVzY3JpcHRpb24gPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXG4gIFwiLnByb2ZpbGVfX2Rlc2NyaXB0aW9uXCJcbik7XG5leHBvcnQgY29uc3QgcHJvZmlsZUF2YXRhciA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcihcIi5wcm9maWxlX19hdmF0YXJcIik7XG5leHBvcnQgY29uc3QgYnV0dG9uVXBkYXRlQXZhdGFyID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKFxuICBcIi5wcm9maWxlX19hdmF0YXItZWRpdFwiXG4pO1xuLy8gcHJvZmlsZSAoaW5mbykgZm9ybSAmIGlucHV0IHZhcnNcbmV4cG9ydCBjb25zdCBtb2RhbFdpbmRvd1Byb2ZpbGUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX3Byb2ZpbGVfaW5mb1wiKTtcbmNvbnN0IGZvcm1Qcm9maWxlID0gZG9jdW1lbnQuZm9ybXNbXCJwcm9maWxlX2luZm9fZm9ybVwiXTtcbmV4cG9ydCBjb25zdCBpbnB1dFByb2ZpbGVOYW1lID0gZm9ybVByb2ZpbGVbXCJuYW1lXCJdOyAvLyBjYW4gcmVmZXIgdG8gYnkgbmFtZSBvciBpZCBhdHRyaWJzXG5leHBvcnQgY29uc3QgaW5wdXRQcm9maWxlRGVzY3JpcHRpb24gPSBmb3JtUHJvZmlsZVtcImRlc2NyaXB0aW9uXCJdO1xuLy8gcHJvZmlsZSBhdmF0YXIgZnJvbSAmIGlucHV0IHZhclxuZXhwb3J0IGNvbnN0IHN1Ym1pdFByb2ZpbGVJbmZvID0gZm9ybVByb2ZpbGVbXCJwcm9maWxlX2luZm9fZm9ybV9zYXZlXCJdO1xuZXhwb3J0IGNvbnN0IG1vZGFsV2luZG93UHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXG4gIFwiI21vZGFsX3Byb2ZpbGVfYXZhdGFyXCJcbik7XG5jb25zdCBmb3JtUHJvZmlsZUF2YXRhciA9IGRvY3VtZW50LmZvcm1zW1wicHJvZmlsZV9hdmF0YXJfZm9ybVwiXTtcbmV4cG9ydCBjb25zdCBpbnB1dFByb2ZpbGVBdmF0YXIgPSBmb3JtUHJvZmlsZUF2YXRhcltcImF2YXRhclwiXTtcbmV4cG9ydCBjb25zdCBzdWJtaXRQcm9maWxlQXZhdGFyID1cbiAgZm9ybVByb2ZpbGVBdmF0YXJbXCJwcm9maWxlX2F2YXRhcl9mb3JtX3NhdmVcIl07XG5cbi8vIGluaXQgY2FyZCBhZGQgJiByZWxhdGVkIG1vZGFsIHdpbmRvd1xuZXhwb3J0IGNvbnN0IGJ1dHRvbkFkZENhcmQgPSBwcm9maWxlLnF1ZXJ5U2VsZWN0b3IoXCIucHJvZmlsZV9fYWRkLWJ1dHRvblwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbFdpbmRvd0NhcmRBZGQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX2NhcmQtYWRkXCIpO1xuLy8gY2FyZC1hZGQgZm9ybSAmIGlucHV0IHZhcnNcbmV4cG9ydCBjb25zdCBmb3JtQ2FyZEFkZCA9IGRvY3VtZW50LmZvcm1zW1wiY2FyZC1hZGRfZm9ybVwiXTtcbmV4cG9ydCBjb25zdCBzdWJtaXRDYXJkQWRkID0gZm9ybUNhcmRBZGRbXCJjYXJkLWFkZF9mb3JtX3NhdmVcIl07XG5cbi8vIGluaXQgY2FyZCB2aWV3IG1vZGFsIHdpbmRvd1xuZXhwb3J0IGNvbnN0IG1vZGFsV2luZG93Q2FyZFZpZXcgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiI21vZGFsX2NhcmQtdmlld1wiKTtcbmV4cG9ydCBjb25zdCBtb2RhbEltYWdlID0gbW9kYWxXaW5kb3dDYXJkVmlldy5xdWVyeVNlbGVjdG9yKFwiLm1vZGFsX19pbWFnZVwiKTtcbmV4cG9ydCBjb25zdCBtb2RhbENhcHRpb24gPVxuICBtb2RhbFdpbmRvd0NhcmRWaWV3LnF1ZXJ5U2VsZWN0b3IoXCIubW9kYWxfX2NhcHRpb25cIik7XG4vLyBzaW5jZSB0aGVzZSBhcmUgc2luZ3VsYXIgZWxlbWVudHMgdGhhdCB3b3VsZCBjaGFuZ2UgY29udGVudCBmb3IgbWFueSBpbWFnZXMvY2FwdGlvbnMsIHFTIHNob3VsZCBvbmx5IGJlIHVzZWQgb25jZSBoZXJlXG5cbi8vIGluaXQgY2FyZCBkZWxldGUgbW9kYWwgd2luZG93XG5leHBvcnQgY29uc3QgbW9kYWxXaW5kb3dDYXJkRGVsZXRlID1cbiAgZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIiNtb2RhbF9jYXJkLWRlbGV0ZVwiKTtcblxuLy8gaW5pdCB0aGUgZ2FsbGVyeSBjYXJkcyBhbmQgYnVpbGQgYWxsIGRlcml2YXRpdmUgYWN0aW9ucyB1cG9uIHBhZ2UgbG9hZFxuZXhwb3J0IGNvbnN0IGNhcmRzR2FsbGVyeSA9IFwiLmdhbGxlcnlfX2NhcmRzXCI7XG5cbi8qIGNvbnN0YW50IGV4cG9ydGluZyBub3RlOlxuICB1c3VhbGx5IHRob3NlIHRoYXQgd291bGQgYmUgcmVmZXJlbmNlZCBpbiBjb2RlIG1vcmUgdGhhbiBvbmNlIHNob3VsZCBiZSBsaXN0ZWQgZnJvbSBoZXJlLlxuICBzZWxlY3RvcnMgIT0gZWxlbWVudHM7IHNlbGVjdG9ycyBhcmUgc3RyaW5ncyBhbmQgZG9uJ3QgbmVlZCB0byBiZSBsaXN0ZWQgaGVyZSAtIGVsZW1zIGRvLlxuKi9cbiIsImltcG9ydCBcIi4vaW5kZXguY3NzXCI7XG5pbXBvcnQgU2VjdGlvbiBmcm9tIFwiLi4vY29tcG9uZW50cy9TZWN0aW9uLmpzXCI7XG5pbXBvcnQgQ2FyZCBmcm9tIFwiLi4vY29tcG9uZW50cy9DYXJkLmpzXCI7XG5pbXBvcnQgRm9ybVZhbGlkYXRvciBmcm9tIFwiLi4vY29tcG9uZW50cy9Gb3JtVmFsaWRhdG9yLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoSW1hZ2UgZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoSW1hZ2UuanNcIjtcbmltcG9ydCBQb3B1cFdpdGhGb3JtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanNcIjtcbmltcG9ydCBQb3B1cFdpdGhDb25maXJtIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm0uanNcIjtcbmltcG9ydCBVc2VySW5mbyBmcm9tIFwiLi4vY29tcG9uZW50cy9Vc2VySW5mby5qc1wiO1xuLyogREVDTEFSQVRJVkUgU0VDVElPTiAqL1xuaW1wb3J0IHtcbiAgY29uZmlndXJhdGlvbixcbiAgYnV0dG9uRWRpdFByb2ZpbGUsXG4gIHByb2ZpbGVOYW1lLFxuICBwcm9maWxlRGVzY3JpcHRpb24sXG4gIGJ1dHRvblVwZGF0ZUF2YXRhcixcbiAgcHJvZmlsZUF2YXRhcixcbiAgbW9kYWxXaW5kb3dQcm9maWxlLFxuICBpbnB1dFByb2ZpbGVOYW1lLFxuICBpbnB1dFByb2ZpbGVEZXNjcmlwdGlvbixcbiAgYnV0dG9uQWRkQ2FyZCxcbiAgbW9kYWxXaW5kb3dDYXJkQWRkLFxuICBmb3JtQ2FyZEFkZCxcbiAgbW9kYWxXaW5kb3dDYXJkVmlldyxcbiAgbW9kYWxJbWFnZSxcbiAgbW9kYWxDYXB0aW9uLFxuICBtb2RhbFdpbmRvd0NhcmREZWxldGUsXG4gIG1vZGFsV2luZG93UHJvZmlsZUF2YXRhcixcbiAgaW5wdXRQcm9maWxlQXZhdGFyLFxuICBjYXJkc0dhbGxlcnksXG4gIHN1Ym1pdFByb2ZpbGVJbmZvLFxuICBzdWJtaXRQcm9maWxlQXZhdGFyLFxuICBzdWJtaXRDYXJkQWRkLFxufSBmcm9tIFwiLi4vdXRpbHMvY29uc3RhbnRzLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuXG5jb25zdCBhcGkgPSBuZXcgQXBpKHtcbiAgYmFzZVVybDogXCJodHRwczovL2Fyb3VuZC1hcGkuZW4udHJpcGxldGVuLXNlcnZpY2VzLmNvbS92MVwiLFxuICBoZWFkZXJzOiB7XG4gICAgXCJjb250ZW50LXR5cGVcIjogXCJhcHBsaWNhdGlvbi9qc29uXCIsXG4gICAgYXV0aG9yaXphdGlvbjogXCJjNDg1NjRmMy1lY2ZiLTRhNjUtYjM1ZC0wMzFhYWJjODQyY2VcIixcbiAgfSxcbn0pO1xuXG5sZXQgY2FyZFNlY3Rpb247IC8vIHNpbmNlIHRoZSBjYXJkIHNlY3Rpb24gaXMgYmVpbmcgdGllZCB0byB0aGUgRE9NIGFuZCBpcyBuZWVkZWQgdG8gYm90aCBpbml0IGFuZCBhZGQgY2FyZHMgbGF0ZXIgb24sIGl0IHdvdWxkIG5lZWQgdG8gYmUgZGVjbGFyZWQgYXQgdGhlIGdsb2JhbCBzY29wZSBhbmQgY2FuIGJlIHJlYXNzaWduZWQgd2l0aCBsZXQuXG5sZXQgdXNlcklkOyAvLyB0aGlzIGlzIGdsb2JhbCB0b29cblxuLy8gdGhpcyBpcyBhIFByb21pc2UgYXJyYXkgdGhhdCB3b3VsZCBnZXQgZnVsZmlsbGVkIHdoZW4gYWxsIHN1YnNlcXVlbnQgcHJvbWlzZXMgYXJlIGZ1bGZpbGxlZCB0b28gKCYmLXN0eWxlKVxuLy8gYXMgc3VjaCwgaXQgY2hhaW5zIG9uIGEgcGVyLWFycmF5IGJhc2lzLCBub3QgcGVyIGluZGl2aWR1YWwgUHJvbWlzZVxuYXBpXG4gIC5nZXRVc2VyQW5kQ2FyZHMoW2FwaS5nZXRVc2VyUHJvZmlsZURhdGEoKSwgYXBpLmdldEluaXRpYWxDYXJkcygpXSlcbiAgLnRoZW4oKFt7IF9pZCwgbmFtZSwgYWJvdXQsIGF2YXRhciB9LCBjYXJkQXJyYXldKSA9PiB7XG4gICAgdXNlcklkID0gX2lkOyAvLyBmb3IgZnV0dXJlIHVzZVxuICAgIHVzZXJQcm9maWxlLnNldFVzZXJJbmZvKG5hbWUsIGFib3V0KTsgLy8gZGVzcGl0ZSBiZWluZyBhc3luYywgdGhpcyB3aWxsIGFscmVhZHkgYmUgaW5pdGlhbGl6ZWQgdGhhbmtzIHRvIGV2ZW50IGxvb3AgKHN5bmMgdGhlbiBhc3luYylcbiAgICB1c2VyUHJvZmlsZS5zZXRBdmF0YXIoYXZhdGFyKTtcblxuICAgIGNhcmRTZWN0aW9uID0gbmV3IFNlY3Rpb24oXG4gICAgICB7XG4gICAgICAgIGl0ZW1zOiBjYXJkQXJyYXksXG4gICAgICAgIHJlbmRlcmVyOiAoaXRlbSkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChpdGVtKTtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50KTtcbiAgICAgICAgfSxcbiAgICAgIH0sXG4gICAgICBjYXJkc0dhbGxlcnlcbiAgICApO1xuICAgIGNhcmRTZWN0aW9uLnJlbmRlckl0ZW1zKCk7XG4gIH0pXG4gIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgY29uc29sZS5lcnJvcihlcnIpOyAvLyB3L291dCBhIHdheSB0byByZXR1cm4gb3IgcHJpbnQgZXJyb3IgdG8gY29uc29sZSBpdCBnZXRzIHVuY2F1Z2h0XG4gIH0pO1xuXG5jb25zdCBjcmVhdGVDYXJkID0gKGNhcmRJdGVtKSA9PiB7XG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICBjYXJkSXRlbSxcbiAgICBcIiNjYXJkLXRlbXBsYXRlXCIsXG4gICAgaGFuZGxlQ2FyZFBvcHVwSW1hZ2UsXG4gICAgaGFuZGxlQ2FyZFBvcHVwRGVsZXRlLFxuICAgIGhhbmRsZUNhcmRMaWtlXG4gICk7XG4gIHJldHVybiBjYXJkLmdlbmVyYXRlQ2FyZCgpO1xufTtcblxuY29uc3QgZm9ybVZhbGlkYXRvcnMgPSB7fTtcbkFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpLmZvckVhY2goKGZvcm1FbGVtZW50KSA9PiB7XG4gIGNvbnN0IHZhbGlkYXRvciA9IG5ldyBGb3JtVmFsaWRhdG9yKGNvbmZpZ3VyYXRpb24sIGZvcm1FbGVtZW50KTtcbiAgZm9ybVZhbGlkYXRvcnNbZm9ybUVsZW1lbnQuaWRdID0gdmFsaWRhdG9yO1xuICB2YWxpZGF0b3IuZW5hYmxlVmFsaWRhdGlvbigpO1xufSk7XG5cbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdChyZXF1ZXN0LCBwb3B1cCwgbG9hZGluZ1RleHQgPSBcIlNhdmluZy4uLlwiKSB7XG4gIC8vIHJlcXVlc3QgaXMgYSBjYWxsYmFjayB0aGF0IHJldHVybnMgYSBQcm9taXNlIHRvIGNoYWluIGJlZm9yZSBjbG9zaW5nIHRoZSBwb3B1cCwgd2hpY2ggbXVzdCBiZSBpbnNpZGUgLnRoZW4gZm9yIHN1Y2Nlc3NmdWwgcmVxdWVzdHMuIHRoZSBjYXRjaCBhbmQgZmluYWxseSBhcmUgYWxsIGZvbGxvd2VkIGFmdGVyIHRoZSBmdW5jdGlvbiBjYWxsIGZpbmlzaGVzIGl0cyAudGhlblxuICAvLyBwb3B1cCBpcyB0aGUgcG9wdXAgaW5zdGFuY2VcbiAgLy8gbG9hZGluZ1RleHQgaXMgb3B0aW9uYWwgZm9yIHRoZSBzdWJtaXQgYnV0dG9uIHdoZW4gdGhlIGFwaSBpcyBiZWluZyByZXF1ZXN0ZWRcbiAgcG9wdXAucmVuZGVyTG9hZGluZyh0cnVlLCBsb2FkaW5nVGV4dCk7IC8vIHJlbmRlcnMgZmFzdGVyIHdoZW4gc3luY2VkIGJlZm9yZSB0aGUgYXN5bmMgYmVnaW5zXG4gIHJlcXVlc3QoKVxuICAgIC50aGVuKCgpID0+IHtcbiAgICAgIHBvcHVwLmNsb3NlKCk7XG4gICAgfSlcbiAgICAuY2F0Y2goY29uc29sZS5lcnJvcilcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cC5yZW5kZXJMb2FkaW5nKGZhbHNlKTtcbiAgICB9KTtcbn1cbi8qIEVORCBERUNMQVJBVElWRSBTRUNUSU9OICovXG5cbi8qIFBST0ZJTEUgSU5GTyBTRUNUSU9OICovXG5jb25zdCB1c2VyUHJvZmlsZSA9IG5ldyBVc2VySW5mbyh7XG4gIC8vIHBhc3MgYXMgYXJndW1lbnRzIHRoZSBIVE1MIERPTSBwcm9maWxlIGVsZW1lbnRzXG4gIG5hbWU6IHByb2ZpbGVOYW1lLFxuICBkZXNjcmlwdGlvbjogcHJvZmlsZURlc2NyaXB0aW9uLFxuICBhdmF0YXI6IHByb2ZpbGVBdmF0YXIsXG59KTtcblxuYnV0dG9uRWRpdFByb2ZpbGUuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgcG9wdXBQcm9maWxlSW5mby5zZXRJbnB1dFZhbHVlcyh1c2VyUHJvZmlsZS5nZXRVc2VySW5mbygpKTsgLy8geyBuYW1lLCBkZXNjcmlwdGlvbiB9XG4gIGZvcm1WYWxpZGF0b3JzW1wicHJvZmlsZV9pbmZvX2Zvcm1cIl0ucmVzZXRGb3JtVmFsaWRhdGlvbigpOyAvLyBpbnB1dCBhbHdheXMgdmFsaWQgd2hlbiB0YWtpbmcgZnJvbSB0aGUgaHRtbCBwYWdlXG4gIHBvcHVwUHJvZmlsZUluZm8ub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwUHJvZmlsZUluZm8gPSBuZXcgUG9wdXBXaXRoRm9ybShcbiAgbW9kYWxXaW5kb3dQcm9maWxlLFxuICAoZXZlbnQsIHsgbmFtZSwgZGVzY3JpcHRpb24gfSkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgaGFuZGxlU3VibWl0KCgpID0+IHtcbiAgICAgIHJldHVybiBhcGkuc2V0VXNlclByb2ZpbGVEYXRhKG5hbWUsIGRlc2NyaXB0aW9uKS50aGVuKCgpID0+IHtcbiAgICAgICAgdXNlclByb2ZpbGUuc2V0VXNlckluZm8obmFtZSwgZGVzY3JpcHRpb24pO1xuICAgICAgfSk7XG4gICAgfSwgcG9wdXBQcm9maWxlSW5mbyk7XG4gIH0sXG4gIGNvbmZpZ3VyYXRpb24uaW5wdXRTZWxlY3RvcixcbiAgc3VibWl0UHJvZmlsZUluZm9cbik7XG5wb3B1cFByb2ZpbGVJbmZvLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4vKiBFTkQgUFJPRklMRSBJTkZPIFNFQ1RJT04gKi9cblxuLyogUFJPRklMRSBBVkFUQVIgU0VDVElPTiAqL1xuYnV0dG9uVXBkYXRlQXZhdGFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gIHBvcHVwUHJvZmlsZUF2YXRhci5zZXRJbnB1dFZhbHVlcyh1c2VyUHJvZmlsZS5nZXRBdmF0YXIoKSk7IC8vIHsgYXZhdGFyIH0gYXMgb2JqLCBub3Qgc3RyaW5nXG4gIHBvcHVwUHJvZmlsZUF2YXRhci5vcGVuKCk7XG59KTtcblxuY29uc3QgcG9wdXBQcm9maWxlQXZhdGFyID0gbmV3IFBvcHVwV2l0aEZvcm0oXG4gIG1vZGFsV2luZG93UHJvZmlsZUF2YXRhcixcbiAgKGV2ZW50LCB7IGF2YXRhciB9KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBoYW5kbGVTdWJtaXQoKCkgPT4ge1xuICAgICAgcmV0dXJuIGFwaS5zZXRVc2VyUHJvZmlsZUF2YXRhcihhdmF0YXIpLnRoZW4oKCkgPT4ge1xuICAgICAgICB1c2VyUHJvZmlsZS5zZXRBdmF0YXIoYXZhdGFyKTtcbiAgICAgICAgcG9wdXBQcm9maWxlQXZhdGFyLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgICB9LCBwb3B1cFByb2ZpbGVBdmF0YXIpO1xuICB9LFxuICBjb25maWd1cmF0aW9uLmlucHV0U2VsZWN0b3IsXG4gIHN1Ym1pdFByb2ZpbGVBdmF0YXJcbik7XG5wb3B1cFByb2ZpbGVBdmF0YXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8qIEVORCBQUk9GSUxFIEFWQVRBUiBTRUNUSU9OICovXG5cbi8qIENBUkQgQUREIFNFQ1RJT04gKi9cbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgLy8gZG9uJ3Qgc2hvdyBlcnJvcnMgdXBvbiBvcGVuaW5nIHRoZSBtb2RhbCB3aGVuIG5vIGlucHV0IGlzIGlzc3VlZFxuICBwb3B1cENhcmRBZGQub3BlbigpO1xufSk7XG5cbmNvbnN0IHBvcHVwQ2FyZEFkZCA9IG5ldyBQb3B1cFdpdGhGb3JtKFxuICBtb2RhbFdpbmRvd0NhcmRBZGQsXG4gIChldmVudCwgeyB0aXRsZSwgbGluayB9KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBoYW5kbGVTdWJtaXQoXG4gICAgICAoKSA9PiB7XG4gICAgICAgIHJldHVybiBhcGkuYWRkTmV3Q2FyZCh0aXRsZSwgbGluaykudGhlbigobmV3Q2FyZCkgPT4ge1xuICAgICAgICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gY3JlYXRlQ2FyZChuZXdDYXJkKTtcbiAgICAgICAgICBjYXJkU2VjdGlvbi5hZGRJdGVtKGNhcmRFbGVtZW50LCBcInByZXBlbmRcIik7IC8vIGNhbiBzdGlsbCBiZSB1c2VkIHRvIGFkZCBsYXRlciBjYXJkcywgbm90IGp1c3QgaW5pdCBvbmVzXG4gICAgICAgICAgcG9wdXBDYXJkQWRkLmNsb3NlKCk7XG4gICAgICAgICAgZm9ybUNhcmRBZGQucmVzZXQoKTtcbiAgICAgICAgICBmb3JtVmFsaWRhdG9yc1tcImNhcmQtYWRkX2Zvcm1cIl0uZGlzYWJsZUJ1dHRvbigpO1xuICAgICAgICB9KTtcbiAgICAgIH0sXG4gICAgICBwb3B1cENhcmRBZGQsXG4gICAgICBcIkNyZWF0aW5nLi4uXCJcbiAgICApO1xuICB9LFxuICBjb25maWd1cmF0aW9uLmlucHV0U2VsZWN0b3IsXG4gIHN1Ym1pdENhcmRBZGRcbik7XG5wb3B1cENhcmRBZGQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbi8qIEVORCBDQVJEIEFERCBTRUNUSU9OICovXG5cbi8qIENBUkQgVklFVyBJTUFHRSBTRUNUSU9OICovXG5mdW5jdGlvbiBoYW5kbGVDYXJkUG9wdXBJbWFnZShjYXJkKSB7XG4gIC8vIHN1Z2dlc3RlZCBieSBTcHJpbnQgNyBwcm9qZWN0IHRvIGtlZXAgdGhpcyBmdW5jIGluIGluZGV4LmpzIGZvciBub3dcbiAgcG9wdXBJbWFnZS5vcGVuKGNhcmQpOyAvLyBzaW5jZSBcInRoaXNcIiBpcyBwcm9oaWJpdGVkIG91dHNpZGUgb2YgY2xhc3NlcywgYW5kIHBhc3NpbmcgYW4gYXJnIHRvIHRoZSBmdW5jIGFzIGEgcGFyYW0gdG8gdGhpcyBmdW5jIGNhdXNlcyBhIGxleGljYWwgcmVmIGVyciwgdGhlbiBpbiB0aGUgY2xhc3MncyBoYW5kbGVyIGZ1bmMgaXQgd291bGQgbmVlZCB0byBwYXNzIHRoZSByZWFkeS1tYWRlIGdldEluZm8oKSBtZXRob2QgdG8gcGFzcyB0aHJvdWdoIHVuaW1wZWRlZFxufVxuXG5jb25zdCBwb3B1cEltYWdlID0gbmV3IFBvcHVwV2l0aEltYWdlKG1vZGFsV2luZG93Q2FyZFZpZXcsIHtcbiAgaW1hZ2U6IG1vZGFsSW1hZ2UsXG4gIGNhcHRpb246IG1vZGFsQ2FwdGlvbixcbn0pO1xucG9wdXBJbWFnZS5zZXRFdmVudExpc3RlbmVycygpO1xuLyogRU5EIENBUkQgVklFVyBJTUFHRSBTRUNUSU9OICovXG5cbi8qIENBUkQgTElLRS9VTkxJS0UgU0VDVElPTiAqL1xuZnVuY3Rpb24gaGFuZGxlQ2FyZExpa2UoY2FyZCkge1xuICBjb25zdCByZXF1ZXN0ID0gY2FyZC5nZXRJbmZvKCkuaXNMaWtlZCA/IFwidW5saWtlQ2FyZFwiIDogXCJsaWtlQ2FyZFwiOyAvLyBpbnZlcnRlZCBsb2dpYyBnZXRzIGhhbmRsZWQgaGVyZVxuICBhcGlbcmVxdWVzdF0oY2FyZC5nZXRJbmZvKCkuaWQpXG4gICAgLnRoZW4oKGNhcmRSZXMpID0+IHtcbiAgICAgIGNhcmQubGlrZUNhcmQoY2FyZFJlcy5pc0xpa2VkKTtcbiAgICB9KVxuICAgIC5jYXRjaCgoZXJyKSA9PiB7XG4gICAgICBjb25zb2xlLmVycm9yKGVycik7XG4gICAgfSk7XG59XG4vKiBFTkQgQ0FSRCBMSUtFL1VOTElLRSBTRUNUSU9OICovXG5cbi8qIENBUkQgREVMRVRFIFNFQ1RJT04gKi9cbmZ1bmN0aW9uIGhhbmRsZUNhcmRQb3B1cERlbGV0ZShjYXJkKSB7XG4gIHBvcHVwQ2FyZERlbGV0ZS5vcGVuKGNhcmQpO1xufVxuXG5jb25zdCBwb3B1cENhcmREZWxldGUgPSBuZXcgUG9wdXBXaXRoQ29uZmlybShcbiAgbW9kYWxXaW5kb3dDYXJkRGVsZXRlLFxuICAoZXZlbnQsIGNhcmQpID0+IHtcbiAgICAvLyB0aGlzIHN1YmNsYXNzIGFjdHMgbGlrZSB0aGUgZm9ybSBwb3B1cCBzdWJjbGFzcyBleGNlcHQgaXQgaGFzIG5vIGlucHV0cy4gSXQgZG9lcyBob3dldmVyIGhlbHAgdG8gcGFzcyB0aGUgbmVjZXNzYXJ5IHBhcmFtIHRvIGhhbmRsZSBjYXJkIGRlbGV0aW9uXG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICAvLyBjb25zb2xlLmxvZyhjYXJkLl9jYXJkRWxlbWVudCk7XG4gICAgYXBpXG4gICAgICAuZGVsZXRlQ2FyZChjYXJkLmdldEluZm8oKS5pZClcbiAgICAgIC50aGVuKCgpID0+IHtcbiAgICAgICAgY2FyZC5kZWxldGVDYXJkKCk7XG4gICAgICB9KVxuICAgICAgLmNhdGNoKChlcnIpID0+IHtcbiAgICAgICAgY29uc29sZS5lcnJvcihlcnIpO1xuICAgICAgfSlcbiAgICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgICAgcG9wdXBDYXJkRGVsZXRlLmNsb3NlKCk7XG4gICAgICB9KTtcbiAgfVxuKTtcbnBvcHVwQ2FyZERlbGV0ZS5zZXRFdmVudExpc3RlbmVycygpO1xuLyogRU5EIENBUkQgREVMRVRFIFNFQ1RJT04gKi9cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIEFwaSB7XG4gIGNvbnN0cnVjdG9yKG9wdGlvbnMpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gb3B0aW9ucy5iYXNlVXJsO1xuICAgIHRoaXMuX2hlYWRlcnMgPSBvcHRpb25zLmhlYWRlcnM7XG4gIH1cblxuICBfcmVxdWVzdCh1cmwsIG9wdGlvbnMpIHtcbiAgICByZXR1cm4gZmV0Y2godXJsLCBvcHRpb25zKS50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpOyAvLyB0aGVuYWJsZSB0YWtlcyByZWZzXG4gIH1cblxuICBfY2hlY2tSZXNwb25zZShyZXMpIHtcbiAgICBpZiAocmVzLm9rKSByZXR1cm4gcmVzLmpzb24oKTsgLy8gaWYgc3VjY2Vzc2Z1bCwgcmV0dXJucyBhIHVzZXIgb2JqZWN0XG4gICAgcmV0dXJuIFByb21pc2UucmVqZWN0KGBlcnJvciAke3Jlcy5zdGF0dXN9YCk7IC8vIG90aGVyd2lzZSwgb3V0cHV0IGFuIGVycm9yIHRvIC5jYXRjaCwgd2hpY2ggc2hvdWxkIHByb3Blcmx5IHJldHVybiB0aGUgcmVqZWN0ZWQgUHJvbWlzZSB0byBhIC5jYXRjaCgpIG91dHNpZGUgdGhlIGNsYXNzIGluIGluZGV4LmpzXG4gIH1cblxuICBnZXRVc2VyUHJvZmlsZURhdGEoKSB7XG4gICAgLy8gcmV0dXJucyBhIFByb21pc2UgdHlwZSBvYmplY3Qgd2hpY2ggaXMgXCJ0aGVuYWJsZVwiIHRvIGNvbnRpbnVlIHRoZSBhc3luYyBjaGFpbiB0byBnbyBmb3J3YXJkIG9uY2UgdGhlIEpTT04gb2JqZWN0IGlzIHJldHJpZXZlZCBmcm9tIHRoZSBzZXJ2ZXIgdmlhIHRoZSBBUEkgY2FsbFxuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkc2AsIHtcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgfSk7XG4gIH1cblxuICBnZXRVc2VyQW5kQ2FyZHMocHJvbWlzZUFycmF5KSB7XG4gICAgcmV0dXJuIFByb21pc2UuYWxsKHByb21pc2VBcnJheSk7XG4gIH1cblxuICBzZXRVc2VyUHJvZmlsZURhdGEobmFtZSwgZGVzY3JpcHRpb24pIHtcbiAgICByZXR1cm4gdGhpcy5fcmVxdWVzdChgJHt0aGlzLl9iYXNlVXJsfS91c2Vycy9tZWAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgbmFtZTogbmFtZSwgYWJvdXQ6IGRlc2NyaXB0aW9uIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgYWRkTmV3Q2FyZCh0aXRsZSwgbGluaykge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzYCwge1xuICAgICAgbWV0aG9kOiBcIlBPU1RcIixcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7IG5hbWU6IHRpdGxlLCBsaW5rOiBsaW5rIH0pLFxuICAgIH0pO1xuICB9XG5cbiAgZGVsZXRlQ2FyZChpZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9YCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIGxpa2VDYXJkKGlkKSB7XG4gICAgcmV0dXJuIHRoaXMuX3JlcXVlc3QoYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtpZH0vbGlrZXNgLCB7XG4gICAgICBtZXRob2Q6IFwiUFVUXCIsIC8vIGRlc3BpdGUgYmVpbmcgXCJQVVRcIiwgdGhlIHNlcnZlciBoYW5kbGVzIHRoZSBib29sZWFuIGp1c3QgZmluZSB3L291dCBhIGJvZHkgaW5zaWRlIHRoZSByZXF1ZXN0XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzLFxuICAgIH0pO1xuICB9XG5cbiAgdW5saWtlQ2FyZChpZCkge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7aWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiBcIkRFTEVURVwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICB9KTtcbiAgfVxuXG4gIHNldFVzZXJQcm9maWxlQXZhdGFyKGF2YXRhcikge1xuICAgIHJldHVybiB0aGlzLl9yZXF1ZXN0KGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lL2F2YXRhcmAsIHtcbiAgICAgIG1ldGhvZDogXCJQQVRDSFwiLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHsgYXZhdGFyOiBhdmF0YXIgfSksXG4gICAgfSk7XG4gIH1cbn1cbiIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcbiAgY29uc3RydWN0b3IoeyBuYW1lLCBkZXNjcmlwdGlvbiwgYXZhdGFyIH0pIHtcbiAgICB0aGlzLl9uYW1lRWxlbWVudCA9IG5hbWU7XG4gICAgdGhpcy5fam9iRWxlbWVudCA9IGRlc2NyaXB0aW9uO1xuICAgIHRoaXMuX2F2YXRhckVsZW1lbnQgPSBhdmF0YXI7XG4gIH1cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIG5hbWU6IHRoaXMuX25hbWVFbGVtZW50LnRleHRDb250ZW50LFxuICAgICAgZGVzY3JpcHRpb246IHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQsXG4gICAgfTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKG5hbWUsIGRlc2NyaXB0aW9uKSB7XG4gICAgdGhpcy5fbmFtZUVsZW1lbnQudGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHRoaXMuX2pvYkVsZW1lbnQudGV4dENvbnRlbnQgPSBkZXNjcmlwdGlvbjtcbiAgfVxuXG4gIGdldEF2YXRhcigpIHtcbiAgICByZXR1cm4geyBhdmF0YXI6IHRoaXMuX2F2YXRhckVsZW1lbnQuc3JjIH07XG4gIH1cblxuICBzZXRBdmF0YXIoYXZhdGFyKSB7XG4gICAgdGhpcy5fYXZhdGFyRWxlbWVudC5zcmMgPSBhdmF0YXI7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi4vY29tcG9uZW50cy9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXAsIG1vZGFsRWxlbWVudHMpIHtcbiAgICBzdXBlcihwb3B1cCk7IC8vIHBvcHVwIHNlbGVjdGVkIGVsZW1lbnRcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnRzID0gbW9kYWxFbGVtZW50czsgLy8gY2FsbGJhY2sgZm9yIHRoZSBtb2RhbCdzIGVsZW1lbnRzXG4gIH1cblxuICAvLyBzZXRFdmVudExpc3RlbmVycygpIGRvZXNuJ3QgbmVlZCBzdXBlciBiZWNhdXNlIGl0J3Mgd29ya2luZyBpbiBhIGRlZmF1bHQgYmVoYXZpb3JcblxuICBvcGVuKHsgbmFtZSwgbGluayB9KSB7XG4gICAgdGhpcy5fbW9kYWxFbGVtZW50cy5pbWFnZS5zcmMgPSBsaW5rO1xuICAgIHRoaXMuX21vZGFsRWxlbWVudHMuaW1hZ2UuYWx0ID0gbmFtZTtcbiAgICB0aGlzLl9tb2RhbEVsZW1lbnRzLmNhcHRpb24udGV4dENvbnRlbnQgPSBuYW1lO1xuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxuXG4gIC8vIGNsb3NlKCkgZG9lc24ndCBuZWVkIG1ldGhvZCBvdmVycmlkaW5nIGVpdGhlclxufVxuIiwiaW1wb3J0IFBvcHVwIGZyb20gXCIuL1BvcHVwXCI7XG5cbmV4cG9ydCBkZWZhdWx0IGNsYXNzIFBvcHVwV2l0aENvbmZpcm0gZXh0ZW5kcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwLCBoYW5kbGVTdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cCk7XG4gICAgdGhpcy5faGFuZGxlU3VibWl0ID0gaGFuZGxlU3VibWl0O1xuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKFwic3VibWl0XCIsIChldmVudCkgPT4ge1xuICAgICAgdGhpcy5faGFuZGxlU3VibWl0KGV2ZW50LCB0aGlzLl9pbml0aWF0b3IpOyAvLyBjb250aW51ZWQgZnJvbSB0aGUgb3Blbihpbml0aWF0b3IpIG1ldGhvZFxuICAgIH0pO1xuICB9XG5cbiAgb3Blbihpbml0aWF0b3IpIHtcbiAgICB0aGlzLl9pbml0aWF0b3IgPSBpbml0aWF0b3I7IC8vIHBhc3MgaW5mbyBhYm91dCB3aGF0IHRyaWdnZXJlZCB0aGUgcG9wdXAgdG8gb3BlblxuICAgIHN1cGVyLm9wZW4oKTtcbiAgfVxufVxuIl0sIm5hbWVzIjpbIlNlY3Rpb24iLCJjb25zdHJ1Y3RvciIsIl9yZWYiLCJzZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJ0aGlzIiwiX2l0ZW1zIiwiX3JlbmRlcmVyIiwiX3NlbGVjdG9yIiwicmVuZGVySXRlbXMiLCJfY29udGFpbmVyIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yIiwiZm9yRWFjaCIsIml0ZW0iLCJhZGRJdGVtIiwiZWxlbWVudCIsIm1ldGhvZCIsImFyZ3VtZW50cyIsImxlbmd0aCIsInVuZGVmaW5lZCIsIkNhcmQiLCJjYXJkU2VsZWN0b3IiLCJoYW5kbGVJbWFnZUNsaWNrIiwiaGFuZGxlQ2FyZERlbGV0ZSIsImhhbmRsZUNhcmRMaWtlIiwibmFtZSIsImxpbmsiLCJfaWQiLCJpc0xpa2VkIiwiX25hbWUiLCJfbGluayIsIl9pc0xpa2VkIiwiX2NhcmRTZWxlY3RvciIsIl9oYW5kbGVJbWFnZUNsaWNrIiwiX2hhbmRsZUNhcmREZWxldGUiLCJfaGFuZGxlQ2FyZExpa2UiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJfY2FyZEltYWdlIiwiYWRkRXZlbnRMaXN0ZW5lciIsImdldEluZm8iLCJfY2FyZExpa2UiLCJfY2FyZERlbGV0ZSIsImxpa2VDYXJkIiwiY2xhc3NMaXN0IiwiZGVsZXRlQ2FyZCIsImNsb3Nlc3QiLCJyZW1vdmUiLCJfY2FyZEVsZW1lbnQiLCJfZ2V0VGVtcGxhdGUiLCJjb250ZW50IiwiY2xvbmVOb2RlIiwiZ2VuZXJhdGVDYXJkIiwic3JjIiwiYWx0IiwidGV4dENvbnRlbnQiLCJpZCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtIiwiX2NvbmZpZyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbnB1dEVsZW1lbnQiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwiX2J1dHRvbkVsZW1lbnQiLCJvYmoiLCJfaGFzSW52YWxpZElucHV0IiwiX3Nob3dJbnB1dEVycm9yIiwiZGlzYWJsZUJ1dHRvbiIsIl9oaWRlSW5wdXRFcnJvciIsImVuYWJsZUJ1dHRvbiIsImlucHV0TGlzdCIsInNvbWUiLCJ2YWxpZGl0eSIsInZhbGlkIiwiaW5wdXRFcnJvciIsInZhbGlkYXRpb25NZXNzYWdlIiwiYWRkIiwicmVwbGFjZSIsInNldEF0dHJpYnV0ZSIsInJlbW92ZUF0dHJpYnV0ZSIsInJlc2V0Rm9ybVZhbGlkYXRpb24iLCJlbmFibGVWYWxpZGF0aW9uIiwiUG9wdXAiLCJwb3B1cCIsIl9wb3B1cCIsInNldEV2ZW50TGlzdGVuZXJzIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZSIsIm9wZW4iLCJfZXNjQ2FsbGJhY2siLCJfaGFuZGxlRXNjQ2xvc2UiLCJiaW5kIiwicmVtb3ZlRXZlbnRMaXN0ZW5lciIsImtleSIsIlBvcHVwV2l0aEZvcm0iLCJoYW5kbGVTdWJtaXQiLCJpbnB1dFNlbGVjdG9yIiwic3VibWl0U2VsZWN0b3IiLCJzdXBlciIsIl9oYW5kbGVTdWJtaXQiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRTZWxlY3RvciIsIl9zdWJtaXRUZXh0IiwiX2dldElucHV0VmFsdWVzIiwiX2lucHV0RmllbGRzIiwiaW5wdXRWYWx1ZXMiLCJpbnB1dCIsInZhbHVlIiwic2V0SW5wdXRWYWx1ZXMiLCJkYXRhIiwicmVuZGVyTG9hZGluZyIsImlzTG9hZGluZyIsImxvYWRpbmdUZXh0IiwiY29uZmlndXJhdGlvbiIsInN1Ym1pdEJ1dHRvblNlbGVjdG9yIiwiaW5hY3RpdmVCdXR0b25DbGFzcyIsImFjdGl2ZUJ1dHRvbkNsYXNzIiwiYWN0aXZlRXJyb3JDbGFzcyIsInByb2ZpbGUiLCJidXR0b25FZGl0UHJvZmlsZSIsInByb2ZpbGVOYW1lIiwicHJvZmlsZURlc2NyaXB0aW9uIiwicHJvZmlsZUF2YXRhciIsImJ1dHRvblVwZGF0ZUF2YXRhciIsIm1vZGFsV2luZG93UHJvZmlsZSIsImZvcm1Qcm9maWxlIiwiZm9ybXMiLCJzdWJtaXRQcm9maWxlSW5mbyIsIm1vZGFsV2luZG93UHJvZmlsZUF2YXRhciIsImZvcm1Qcm9maWxlQXZhdGFyIiwic3VibWl0UHJvZmlsZUF2YXRhciIsImJ1dHRvbkFkZENhcmQiLCJtb2RhbFdpbmRvd0NhcmRBZGQiLCJmb3JtQ2FyZEFkZCIsInN1Ym1pdENhcmRBZGQiLCJtb2RhbFdpbmRvd0NhcmRWaWV3IiwibW9kYWxJbWFnZSIsIm1vZGFsQ2FwdGlvbiIsIm1vZGFsV2luZG93Q2FyZERlbGV0ZSIsImFwaSIsIm9wdGlvbnMiLCJfYmFzZVVybCIsImJhc2VVcmwiLCJfaGVhZGVycyIsImhlYWRlcnMiLCJfcmVxdWVzdCIsInVybCIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImdldFVzZXJQcm9maWxlRGF0YSIsImdldEluaXRpYWxDYXJkcyIsImdldFVzZXJBbmRDYXJkcyIsInByb21pc2VBcnJheSIsImFsbCIsInNldFVzZXJQcm9maWxlRGF0YSIsImRlc2NyaXB0aW9uIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImFkZE5ld0NhcmQiLCJ0aXRsZSIsInVubGlrZUNhcmQiLCJzZXRVc2VyUHJvZmlsZUF2YXRhciIsImF2YXRhciIsImF1dGhvcml6YXRpb24iLCJjYXJkU2VjdGlvbiIsInVzZXJJZCIsImNhcmRBcnJheSIsInVzZXJQcm9maWxlIiwic2V0VXNlckluZm8iLCJzZXRBdmF0YXIiLCJjYXJkRWxlbWVudCIsImNyZWF0ZUNhcmQiLCJjYXRjaCIsImVyciIsImNvbnNvbGUiLCJlcnJvciIsImNhcmRJdGVtIiwiaGFuZGxlQ2FyZFBvcHVwSW1hZ2UiLCJoYW5kbGVDYXJkUG9wdXBEZWxldGUiLCJmb3JtVmFsaWRhdG9ycyIsInJlcXVlc3QiLCJmaW5hbGx5IiwiZm9ybUVsZW1lbnQiLCJ2YWxpZGF0b3IiLCJfbmFtZUVsZW1lbnQiLCJfam9iRWxlbWVudCIsIl9hdmF0YXJFbGVtZW50IiwiZ2V0VXNlckluZm8iLCJnZXRBdmF0YXIiLCJwb3B1cFByb2ZpbGVJbmZvIiwiX3JlZjIiLCJwcmV2ZW50RGVmYXVsdCIsInBvcHVwUHJvZmlsZUF2YXRhciIsIl9yZWYzIiwicG9wdXBDYXJkQWRkIiwiX3JlZjQiLCJuZXdDYXJkIiwicmVzZXQiLCJjYXJkIiwicG9wdXBJbWFnZSIsIm1vZGFsRWxlbWVudHMiLCJfbW9kYWxFbGVtZW50cyIsImltYWdlIiwiY2FwdGlvbiIsImNhcmRSZXMiLCJwb3B1cENhcmREZWxldGUiLCJfaW5pdGlhdG9yIiwiaW5pdGlhdG9yIl0sInNvdXJjZVJvb3QiOiIifQ==